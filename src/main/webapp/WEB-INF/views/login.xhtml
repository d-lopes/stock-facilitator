<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--/* 
 Copyright (c) 2016 Dominique Lopes.
 All rights reserved. 

 This Source Code Form is subject to the terms of the Mozilla Public 
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at http://mozilla.org/MPL/2.0/.

 Contributors:
     Dominique Lopes - initial API and implementation
*/-->

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/layouts/standard.xhtml">
	
<ui:define name="title">Login</ui:define>

<ui:define name="content">

        <h1>Login page</h1>
        <p>Example user: user / password</p>
        <c:if test="${not empty param.login_error}">
			<div class="error">
				Your login attempt was not successful, try again.<br />
				Reason: #{sessionScope.SPRING_SECURITY_LAST_EXCEPTION.message}
			</div>
		</c:if>

<form name="f" action="${request.contextPath}/app/loginProcess" method="post">
		<label for="username">Username</label>:
		<c:if test="${not empty param.login_error}">
			<c:set var="username" value="${sessionScope.SPRING_SECURITY_LAST_USERNAME}"/>
		</c:if>
		<input type="text" id="username" name="username" value="#{username}" /> <br />
            <label for="password">Password</label>:
            <input type="password" id="password" name="password" /> <br />		
					<p>
					<input type="checkbox" name="_spring_security_remember_me"/> 
					Remember me
				</p>
				<p>
					<input name="submit" type="submit" value="Login" />
				</p>
	</form>
	<p><a href="/app/index">Back to home page</a></p>
	
</ui:define>

</ui:composition>